<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Clear Storage - Emergency Guardian</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
        background: #1e3a8a;
        color: white;
        text-align: center;
      }
      .container {
        max-width: 600px;
        margin: 0 auto;
        padding: 30px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 15px;
        backdrop-filter: blur(15px);
      }
      .button {
        background: #ef4444;
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 10px;
        cursor: pointer;
        font-size: 16px;
        font-weight: 600;
        margin: 10px;
        transition: all 0.3s;
      }
      .button:hover {
        background: #dc2626;
        transform: translateY(-2px);
      }
      .button.success {
        background: #10b981;
      }
      .button.success:hover {
        background: #059669;
      }
      .status {
        background: rgba(0, 0, 0, 0.3);
        padding: 15px;
        border-radius: 10px;
        margin: 20px 0;
        font-family: monospace;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸ§¹ Clear Storage</h1>
      <p>æ¸…é™¤æœ¬åœ°å­˜å‚¨ä»¥ä¿®å¤æ—¥æœŸåºåˆ—åŒ–é—®é¢˜</p>

      <div class="status" id="status">å‡†å¤‡æ¸…é™¤å­˜å‚¨...</div>

      <button class="button" onclick="clearStorage()">æ¸…é™¤æœ¬åœ°å­˜å‚¨</button>

      <button class="button success" onclick="openMainApp()">æ‰“å¼€ä¸»åº”ç”¨</button>

      <div style="margin-top: 30px; text-align: left">
        <h3>è¯´æ˜ï¼š</h3>
        <ul>
          <li>ç‚¹å‡»"æ¸…é™¤æœ¬åœ°å­˜å‚¨"æ¥åˆ é™¤æ—§çš„åºåˆ—åŒ–æ•°æ®</li>
          <li>ç„¶åç‚¹å‡»"æ‰“å¼€ä¸»åº”ç”¨"é‡æ–°åˆå§‹åŒ–æ•°æ®</li>
          <li>è¿™å°†ä¿®å¤æ—¥æœŸå¯¹è±¡çš„åºåˆ—åŒ–é—®é¢˜</li>
        </ul>
      </div>
    </div>

    <script>
      function clearStorage() {
        try {
          // æ¸…é™¤localStorage
          localStorage.clear();

          // æ¸…é™¤sessionStorage
          sessionStorage.clear();

          // æ›´æ–°çŠ¶æ€
          document.getElementById("status").innerHTML = `
                    <div style="color: #10b981;">âœ… æœ¬åœ°å­˜å‚¨å·²æ¸…é™¤</div>
                    <div>localStorage: å·²æ¸…ç©º</div>
                    <div>sessionStorage: å·²æ¸…ç©º</div>
                    <div style="margin-top: 10px; color: #fbbf24;">ç°åœ¨å¯ä»¥æ‰“å¼€ä¸»åº”ç”¨äº†</div>
                `;

          console.log("Storage cleared successfully");
        } catch (error) {
          document.getElementById("status").innerHTML = `
                    <div style="color: #ef4444;">âŒ æ¸…é™¤å¤±è´¥: ${error.message}</div>
                `;
          console.error("Failed to clear storage:", error);
        }
      }

      function openMainApp() {
        const url = "http://localhost:5173/";
        const newWindow = window.open(url, "_blank", "width=1400,height=900");

        if (newWindow) {
          document.getElementById("status").innerHTML = `
                    <div style="color: #10b981;">âœ… ä¸»åº”ç”¨å·²æ‰“å¼€</div>
                    <div>è¯·åœ¨æ–°æ ‡ç­¾é¡µä¸­æŸ¥çœ‹ä¿®å¤ç»“æœ</div>
                `;
        } else {
          alert("æ— æ³•æ‰“å¼€æ–°æ ‡ç­¾é¡µã€‚è¯·æ‰‹åŠ¨è®¿é—®: http://localhost:5173/");
        }
      }

      // æ˜¾ç¤ºå½“å‰å­˜å‚¨çŠ¶æ€
      window.addEventListener("load", () => {
        const storageKeys = Object.keys(localStorage);
        document.getElementById("status").innerHTML = `
                <div>å½“å‰localStorageé¡¹ç›®: ${storageKeys.length}</div>
                <div style="font-size: 12px; margin-top: 5px;">
                    ${storageKeys.length > 0 ? storageKeys.join(", ") : "æ— "}
                </div>
            `;
      });
    </script>
  </body>
</html>
